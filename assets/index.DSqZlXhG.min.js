import{j as e}from"./icons.DHZLH5cu.min.js";import{r as d,R as C}from"./index.C8ayVwQI.min.js";import{r as L,u as P,l as w,f as b,a as I,b as p,m as $,C as D,F as x,g as F,c as R,d as B,e as A,h as E,i as T,j as S,k as z,R as O,n as U,N as V,P as k,o as q}from"./ContactList.QP8dWZ6D.min.js";import{S as u,s as H,a as Q,r as G}from"./Global.CZoLVvO7.min.js";import{c as M}from"./redux-toolkit.modern.DURh381R.min.js";import{c as W,a as Y,p as J}from"./productSlice.C2dECdfd.min.js";import{B as h}from"./button.CdF1pWhJ.min.js";import{I as m}from"./edit.B7SVrAd2.min.js";import"./customerUtils.C7O5_bBb.min.js";import{c as K,a as X}from"./customerUtils.CvkgFsrJ.min.js";import"./_commonjsHelpers.Cpj98o6Y.min.js";import"./contactsLoader.El1tzQ7g.min.js";import"./index.BYzmSUuc.min.js";import"./index.Bb4qSo10.min.js";import"./utils.CHtjtCvc.min.js";var f={},v=L;f.createRoot=v.createRoot,f.hydrateRoot=v.hydrateRoot;d.createContext(null);d.createContext(null);const Z=M({reducer:{contacts:W,customers:Y,products:J}});function N(){const t=P();return console.error(t),d.useEffect(()=>(t?document.getElementById(u).classList.add("error-state"):document.getElementById(u).classList.remove("error-state"),()=>{document.getElementById(u).classList.remove("error-state")}),[t]),e.jsx("div",{id:"error-page",children:e.jsxs("p",{children:["React Errors:  ",e.jsx("i",{children:t.statusText||t.message})]})})}async function ee({request:t,params:s}){try{const n=new URL(t.url).searchParams.get("q");return await w(),{contacts:await b(n),q:n}}catch(a){throw new Error("contactsLoader() issue: ",a)}}async function te({request:t,params:s}){try{const n=new URL(t.url).searchParams.get("q");return await w(),{contacts:await b(n),q:n}}catch(a){throw new Error("contactsLoader() issue: ",a)}}const ae="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _=(t=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=ae[a[t]&63];return s};async function y({params:t}){const s=await F(t.contactId);if(!s)throw new Response("",{status:404,statusText:"Contact Not Found"});return{contact:s}}async function se({request:t,params:s}){let a=await t.formData();return R(s.contactId,{favorite:a.get("favorite")==="true"})}function re(){const{contact:t}=I(),[s,a]=d.useState(),{placeholderImages:n,imageLoadingError:i}=p(r=>r.contacts);d.useEffect(()=>{if(!t||!t.avatar){console.log("====> contact or contact.avatar undefined ");return}return a(t.avatar.trim()),()=>{}},[t.avatar,t]);const o=d.useCallback(()=>{try{let r=s;if(!r||r.trim()==="")return n["ppl-1"];if(H(r)&&Q(r)){let c=r;return c=G(c),n[c]}else return s}catch(r){return console.error("Error getting placeholder imgs:",r),""}},[s]);return i?e.jsxs("div",{children:["Error loading images: ",i.message]}):e.jsxs($.div,{id:"contact",className:"detail_section",children:[e.jsx("div",{className:"detail_img_wrapper",children:s&&s.trim()!==""?e.jsx("img",{className:"detail_img_main",src:o()},s):e.jsx(D,{className:" text-slate-200 w-full h-full"})}),e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsxs("h1",{className:"section_heading",children:[t.first||t.last?e.jsxs(e.Fragment,{children:[t.first," ",t.last]}):e.jsx("i",{children:"No Name"})," ",e.jsx(ne,{contact:t})]}),t.twitter&&e.jsx("p",{children:e.jsx("a",{target:"_blank",href:`https://twitter.com/${t.twitter}`,children:t.twitter})}),t.notes&&e.jsx("p",{children:t.notes}),e.jsxs("div",{className:"contact-btn-wrapper my-4 flex",children:[e.jsx(x,{action:"edit",children:e.jsx(h,{className:" text-contrast2 ",type:"submit",size:"xl",children:"Edit"})}),e.jsx(x,{method:"post",action:"destroy",onSubmit:r=>{confirm("Please confirm you want to delete this record.")||r.preventDefault()},children:e.jsx(h,{className:"ml-4  text-contrast2 ",type:"submit",size:"xl",children:"Delete"})})]})]})]},`${t.id}`)}function ne({contact:t}){const s=B();let a=t.favorite;return s.formData&&(a=s.formData.get("favorite")==="true"),e.jsx(s.Form,{method:"post",children:e.jsx("button",{name:"favorite",value:a?"false":"true","aria-label":a?"Remove from favorites":"Add to favorites",children:a?"★":"☆"})})}async function oe({request:t,params:s}){const a=await t.formData(),n=Object.fromEntries(a);return await R(s.contactId,n),E(`/contacts/${s.contactId}`)}function ie(){const{contact:t}=I(),s=A();return e.jsxs(x,{method:"post",id:"contact-form",children:[e.jsxs("p",{className:"form-row",children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx(m,{size:"xl",placeholder:"First","aria-label":"First name",type:"text",name:"first",defaultValue:t.first}),e.jsx(m,{className:" ml-4",size:"xl",placeholder:"Last","aria-label":"Last name",type:"text",name:"last",defaultValue:t.last})]}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Twitter"}),e.jsx(m,{size:"xl",type:"text",name:"twitter",placeholder:"@jack",defaultValue:t.twitter})]})}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Avatar URL"}),e.jsx(m,{size:"xl",placeholder:"https://example.com/avatar.jpg","aria-label":"Avatar URL",type:"text",name:"avatar",defaultValue:t.avatar})]})}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:" w-full  text-contrast2",name:"notes",defaultValue:t.notes,rows:6})]})}),e.jsxs("p",{className:"form-row",children:[e.jsx("span",{className:"form-label"}),e.jsx(h,{type:"submit",size:"xl",className:"  text-contrast2",children:"Save"}),e.jsx(h,{type:"button",size:"xl",className:"ml-4 text-contrast2",onClick:()=>{s(-1)},children:"Cancel"})]})]})}async function ce({params:t}){return await T(t.contactId),E("/")}function le(){return e.jsx("div",{className:"section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Directory:"})," Provides a glossary of your B2B customer contact information, streamlining communication. While this serves as a proof-of-concept for a contact directory, its underlying layout can be adapted to encompass a wider range of functionalities.  This includes the management of merchandise information, product categorization, and establishing associations between different data points."]})})}function de(){return e.jsx("div",{className:"section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Best Sellers:"})," Leverage Shopify's ",e.jsx("a",{href:"https://shopify.dev/docs/api/storefront",children:" GraphQL Storefront API "})," to retrieve real-time product data and identify your top-performing items. This product list goes beyond what a basic Shopify store offers. By leveraging the data you gather, you can tailor it into a format that enhances the customer experience. Imagine curated collections, personalized recommendations, or dynamic product displays based on browsing behavior –  all features unavailable in the default Shopify setup."]})})}function me(){var n,i;const{products:t}=p(o=>o.products),{handle:s}=S();let a=t.filter(o=>o.handle===s)[0];return e.jsx("div",{id:"product_detail",className:"detail_section",children:a!=null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"detail_img_wrapper",children:e.jsx("img",{className:"detail_img_main",src:`${(n=a==null?void 0:a.featuredImage)==null?void 0:n.originalSrc}`,loading:"lazy"})}),e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsx("h1",{className:"section_heading",children:a.title}),e.jsx("div",{className:"handle ",children:e.jsx("span",{className:"num_format_box",children:a.handle})}),e.jsx("div",{className:"description py-10",children:a.description}),e.jsxs("div",{className:"list_section variants",children:[e.jsx("h2",{className:"list_title",children:"Variants: "}),e.jsx("ul",{children:(i=a==null?void 0:a.variants)==null?void 0:i.edges.map(o=>{let r=o.node,c=r.id.replace("gid://shopify/ProductVariant/",""),l=r.selectedOptions[0];return e.jsxs("li",{className:"variantItem",children:[e.jsx("span",{className:"vid num_format_box",children:c}),e.jsx("span",{className:"selectedOption uppercase num_format_box",children:`${l.name}/${l.value}`})]},c)})})]})]})]}):e.jsx("div",{children:" no product match the param "})})}function ue(){return p(t=>t.customers),e.jsx("div",{className:"customerIndex section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Purchase History:"})," Utilize Shopify's  ",e.jsx("a",{href:"https://shopify.dev/docs/api/admin-graphql",children:" GraphQL Admin API "})," to extract detailed customer data for business intelligence. This includes metrics like total spending since account creation. By accessing this data, businesses can gain insights into customer behavior, optimize marketing, and improve customer relationship management, driving growth and success."]})})}function he(){var i;const{customers:t}=p(o=>o.customers),{customerId:s}=S();let a=t.filter(o=>o.id.replace("gid://shopify/Customer/","")===s?o:"")[0];const n=d.useMemo(()=>K(a),[a]);return e.jsx("div",{id:"customer_detail",className:"detail_section",children:a!=null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsx("h1",{className:"section_heading",children:`${a.firstName} ${a.lastName}`}),e.jsxs("div",{className:"totalSpending",children:["Total Spending: ",e.jsxs("span",{className:"num_format_box bg-green-700",children:["$",n]})]}),e.jsx("div",{className:"description",children:a.description}),e.jsxs("div",{className:"list_section",children:[e.jsx("h2",{className:"list_title",children:"Orders: "}),e.jsx("ul",{children:(i=a==null?void 0:a.orders)==null?void 0:i.edges.map(o=>{let r=o.node,c=r.lineItems.nodes;return e.jsxs("li",{className:"listItem orderItem",children:[e.jsxs("div",{className:"orderHeader",children:[e.jsx("span",{className:"orderNum num_format_box",children:r.name})," ",e.jsx("span",{className:"orderDate num_format_box",children:X(r.createdAt)})," ",e.jsxs("span",{className:"totalprice num_format_box",children:["$",r.totalPrice]})]}),e.jsx("div",{className:"orderBody",children:e.jsx("ul",{children:c.map(l=>{var g;const j=(g=l==null?void 0:l.product)==null?void 0:g.featuredImage.originalSrc;return e.jsxs("li",{className:"order_lineItem",children:[e.jsx("span",{className:"lineItem_img_wrapper",children:e.jsx("img",{className:"lineItem_img_main",src:j})}),e.jsx("span",{className:"lineItem_info num_format_box border-none",children:`${l.name} / qty:${l.quantity}`})]},`${j}-${_()}`)})})})]},`${o.id}-${_()}`)})})]})]})}):e.jsx("div",{children:" no customer match the param "})})}const pe=z([{path:"/",element:e.jsx(O,{}),errorElement:e.jsx(N,{}),loader:ee,action:U,children:[{errorElement:e.jsx(N,{}),children:[{index:!0,path:"contacts",element:e.jsx(le,{}),loader:te},{path:"contacts/:contactId",element:e.jsx(re,{}),loader:y,action:se},{path:"contacts/:contactId/edit",element:e.jsx(ie,{}),loader:y,action:oe},{path:"contacts/:contactId/destroy",action:ce,errorElement:e.jsx("div",{children:"Oops! There was an error."})},{path:"products",element:e.jsx(de,{})},{path:"products/:handle",element:e.jsx(me,{})},{path:"customers",element:e.jsx(ue,{})},{path:"customers/:customerId",element:e.jsx(he,{})}]}]},{path:"*",element:e.jsx(V,{to:"/",replace:!0})}]),xe=()=>e.jsx(C.StrictMode,{children:e.jsx(k,{store:Z,children:e.jsx(q,{router:pe})})}),fe=f.createRoot(document.getElementById(u));fe.render(e.jsx(xe,{}));
