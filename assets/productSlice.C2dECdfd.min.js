import{a}from"./redux-toolkit.modern.DURh381R.min.js";import{i as p}from"./Global.CZoLVvO7.min.js";import{c as u}from"./customerUtils.CvkgFsrJ.min.js";import{s as m}from"./customerUtils.C7O5_bBb.min.js";const g=""+new URL("ppl-1.DNYQ4w4w.min.jpg",import.meta.url).href,f=Object.freeze(Object.defineProperty({__proto__:null,default:g},Symbol.toStringTag,{value:"Module"})),_=""+new URL("ppl-2.BmTWfSmn.min.jpg",import.meta.url).href,y=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"})),S=""+new URL("ppl-3.BNWlGRTx.min.jpg",import.meta.url).href,b=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"})),h=""+new URL("ppl-4.BQ_z0gR7.min.jpg",import.meta.url).href,j=Object.freeze(Object.defineProperty({__proto__:null,default:h},Symbol.toStringTag,{value:"Module"})),O=""+new URL("ppl-5.BfO9cnIP.min.jpg",import.meta.url).href,w=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"})),v=""+new URL("ppl-6.AoeTgME2.min.jpg",import.meta.url).href,P=Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"})),E=""+new URL("ppl-7.Uz3IVIb6.min.jpg",import.meta.url).href,I=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"})),c=a({name:"contacts",initialState:{placeholderImages:{},imageLoadingError:null},reducers:{loadImages:(e,r)=>{e.imageLoadingError=!1,e.placeholderImages={...e.placeholderImages,...r.payload}},imageLoadingErr:e=>{e.imageLoadingError=!0}}}),J=()=>async(e,r)=>{try{const t=p(Object.assign({"../../assets/contacts/ppl-1.jpg":f,"../../assets/contacts/ppl-2.jpg":y,"../../assets/contacts/ppl-3.jpg":b,"../../assets/contacts/ppl-4.jpg":j,"../../assets/contacts/ppl-5.jpg":w,"../../assets/contacts/ppl-6.jpg":P,"../../assets/contacts/ppl-7.jpg":I}));e(T(t))}catch{e(L())}},{loadImages:T,imageLoadingErr:L}=c.actions,Q=c.reducer,R=`{
  customers(first: 10) { 
    edges {
      node {       
        id        
        verifiedEmail
        lastName
        firstName
    		numberOfOrders
        orders(first: 10) {
          edges {
            node {
              id
              name 
              totalPrice
              createdAt
              lineItems(first: 10) {
                nodes {
                  name
                  quantity
                  title
                  product {
                    featuredImage {
                      originalSrc
                    }
                  }
                }
              }
            }
          }
        } 
        lastOrder {
          id
          name
          lineItems (first: 10){
            nodes{
              title
              product{
                priceRangeV2{
                  maxVariantPrice{
                    amount
                  }
                }
                images (first:1) {
                  edges {
                    node {
                      id
                    }
                  }
                }
        
              }
            }
          }             
        }
        validEmailAddress
        tags
        image {
          id
        }
        
      }
    }
  }
}


`;async function C(){try{const e=new Headers({"X-Shopify-Access-Token":"6dfcc32eba205a4b80df437caf4dcc5c","Content-Type":"application/json"});return(await(await fetch("https://vzine.myshopify.com/admin/api/2024-04/graphql.json",{method:"POST",headers:e,body:JSON.stringify({query:R})})).json()).data.customers.edges.map(o=>o.node)}catch(e){console.error("fetchCustomersByAdminAPI() error fetching customers: ",e)}}const l=a({name:"customers",initialState:{customers:[],loadingError:null},reducers:{loadCustomers:(e,r)=>{e.loadingError=!1;const t=new Set(e.customers.map(o=>o.id));if(r.payload.filter(o=>!t.has(o.id)).length>0){const o=r.payload.map(n=>({...n,totalSpending:u(n)}));let d=[...e.customers,...o];e.customers=d.sort(m("firstName","lastName"))}},loadingError:e=>{e.loadingError=!0}}}),W=()=>async(e,r)=>{try{const t=await C();e(z(t))}catch{e(A())}},{loadCustomers:z,loadingError:A}=l.actions,X=l.reducer,M=` {
  products(first: 10) {
    edges {
      node {
        id
        title
        handle
        description
        variants(first: 5) {
          edges {
            node {              
              id
              selectedOptions {
                name
                value
              }
              priceV2 {
                amount
                currencyCode
              }
            }
          }
        }
        featuredImage {
          originalSrc
          src
        }
      }
    }
  }
}`;async function N(){return(await(await fetch("https://vzine.myshopify.com/api/2024-07/graphql.json",{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":"7205448e608af45a59ff19512e93792b"},body:JSON.stringify({query:M})})).json()).data.products.edges.map(s=>s.node)}const i=a({name:"product",initialState:{products:[],loadingError:null},reducers:{loadProducts:(e,r)=>{e.loadingError=!1;const t=new Set(e.products.map(o=>o.id));r.payload.filter(o=>!t.has(o.id)).length>0&&(e.products=[...e.products,...r.payload])},loadingError:e=>{e.loadingError=!0}}}),$=()=>async(e,r)=>{try{const t=await N();e(U(t))}catch{e(q())}},{loadProducts:U,loadingError:q}=i.actions,D=i.reducer;export{X as a,$ as b,Q as c,W as d,J as f,D as p};
