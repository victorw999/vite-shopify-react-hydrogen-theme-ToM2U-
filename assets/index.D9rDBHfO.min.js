import{j as e}from"./icons.DHZLH5cu.min.js";import{r as m,R as F}from"./index.C8ayVwQI.min.js";import{r as B,u as z,l as S,f as C,a as L,b as v,m as A,C as T,F as N,g as O,c as $,d as U,e as V,h as P,i as k,j as D,k as q,R as H,n as Q,N as G,P as M,o as W}from"./ContactList.Di3h1dmp.min.js";import{S as j,s as Y,a as J,r as K}from"./Global.CZoLVvO7.min.js";import{c as X}from"./redux-toolkit.modern.DURh381R.min.js";import{c as Z,a as ee,p as te}from"./productSlice.DgchAzsl.min.js";import{B as g}from"./button.CdF1pWhJ.min.js";import{I as f}from"./edit.B7SVrAd2.min.js";import"./customerUtils.C7O5_bBb.min.js";import{c as ae,a as se}from"./customerUtils.CvkgFsrJ.min.js";import"./_commonjsHelpers.Cpj98o6Y.min.js";import"./contactsLoader.El1tzQ7g.min.js";import"./index.BYzmSUuc.min.js";import"./index.Bb4qSo10.min.js";import"./utils.CHtjtCvc.min.js";var _={},b=B;_.createRoot=b.createRoot,_.hydrateRoot=b.hydrateRoot;m.createContext(null);m.createContext(null);const re=X({reducer:{contacts:Z,customers:ee,products:te}});function I(){const t=z();return console.error(t),m.useEffect(()=>(t?document.getElementById(j).classList.add("error-state"):document.getElementById(j).classList.remove("error-state"),()=>{document.getElementById(j).classList.remove("error-state")}),[t]),e.jsx("div",{id:"error-page",children:e.jsxs("p",{children:["React Errors:  ",e.jsx("i",{children:t.statusText||t.message})]})})}async function ne({request:t,params:s}){try{const n=new URL(t.url).searchParams.get("q");return await S(),{contacts:await C(n),q:n}}catch(a){throw new Error("contactsLoader() issue: ",a)}}async function oe({request:t,params:s}){try{const n=new URL(t.url).searchParams.get("q");return await S(),{contacts:await C(n),q:n}}catch(a){throw new Error("contactsLoader() issue: ",a)}}const ie="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let R=(t=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(t));for(;t--;)s+=ie[a[t]&63];return s};async function E({params:t}){const s=await O(t.contactId);if(!s)throw new Response("",{status:404,statusText:"Contact Not Found"});return{contact:s}}async function ce({request:t,params:s}){let a=await t.formData();return $(s.contactId,{favorite:a.get("favorite")==="true"})}function le(){const{contact:t}=L(),[s,a]=m.useState(),{placeholderImages:n,imageLoadingError:i}=v(r=>r.contacts);m.useEffect(()=>{if(!t||!t.avatar){console.log("====> contact or contact.avatar undefined ");return}return a(t.avatar.trim()),()=>{}},[t.avatar,t]);const o=m.useCallback(()=>{try{let r=s;if(!r||r.trim()==="")return n["ppl-1"];if(Y(r)&&J(r)){let c=r;return c=K(c),n[c]}else return s}catch(r){return console.error("Error getting placeholder imgs:",r),""}},[s]);return i?e.jsxs("div",{children:["Error loading images: ",i.message]}):e.jsxs(A.div,{id:"contact",className:"detail_section",children:[e.jsx("div",{className:"detail_img_wrapper",children:s&&s.trim()!==""?e.jsx("img",{className:"detail_img_main",src:o()},s):e.jsx(T,{className:" text-slate-200 w-full h-full"})}),e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsxs("h1",{className:"section_heading",children:[t.first||t.last?e.jsxs(e.Fragment,{children:[t.first," ",t.last]}):e.jsx("i",{children:"No Name"})," ",e.jsx(de,{contact:t})]}),t.twitter&&e.jsx("p",{children:e.jsx("a",{target:"_blank",href:`https://twitter.com/${t.twitter}`,children:t.twitter})}),t.notes&&e.jsx("p",{children:t.notes}),e.jsxs("div",{className:"contact-btn-wrapper my-4 flex",children:[e.jsx(N,{action:"edit",children:e.jsx(g,{className:" text-contrast2 ",type:"submit",size:"xl",children:"Edit"})}),e.jsx(N,{method:"post",action:"destroy",onSubmit:r=>{confirm("Please confirm you want to delete this record.")||r.preventDefault()},children:e.jsx(g,{className:"ml-4  text-contrast2 ",type:"submit",size:"xl",children:"Delete"})})]})]})]},`${t.id}`)}function de({contact:t}){const s=U();let a=t.favorite;return s.formData&&(a=s.formData.get("favorite")==="true"),e.jsx(s.Form,{method:"post",children:e.jsx("button",{name:"favorite",value:a?"false":"true","aria-label":a?"Remove from favorites":"Add to favorites",children:a?"★":"☆"})})}async function me({request:t,params:s}){const a=await t.formData(),n=Object.fromEntries(a);return await $(s.contactId,n),P(`/contacts/${s.contactId}`)}function he(){const{contact:t}=L(),s=V();return e.jsxs(N,{method:"post",id:"contact-form",children:[e.jsxs("p",{className:"form-row",children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx(f,{size:"xl",placeholder:"First","aria-label":"First name",type:"text",name:"first",defaultValue:t.first}),e.jsx(f,{className:" ml-4",size:"xl",placeholder:"Last","aria-label":"Last name",type:"text",name:"last",defaultValue:t.last})]}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Twitter"}),e.jsx(f,{size:"xl",type:"text",name:"twitter",placeholder:"@jack",defaultValue:t.twitter})]})}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Avatar URL"}),e.jsx(f,{size:"xl",placeholder:"https://example.com/avatar.jpg","aria-label":"Avatar URL",type:"text",name:"avatar",defaultValue:t.avatar})]})}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:" w-full  text-contrast2",name:"notes",defaultValue:t.notes,rows:6})]})}),e.jsxs("p",{className:"form-row",children:[e.jsx("span",{className:"form-label"}),e.jsx(g,{type:"submit",size:"xl",className:"  text-contrast2",children:"Save"}),e.jsx(g,{type:"button",size:"xl",className:"ml-4 text-contrast2",onClick:()=>{s(-1)},children:"Cancel"})]})]})}async function ue({params:t}){return await k(t.contactId),P("/")}function pe(){return e.jsx("div",{className:"section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Directory:"})," Provides a glossary of your B2B customer contact information, streamlining communication. While this serves as a proof-of-concept for a contact directory, its underlying layout can be adapted to encompass a wider range of functionalities.  This includes the management of merchandise information, product categorization, and establishing associations between different data points."]})})}function xe(){return e.jsx("div",{className:"section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Best Sellers:"})," Leverage Shopify's ",e.jsx("a",{href:"https://shopify.dev/docs/api/storefront",children:" GraphQL Storefront API "})," to retrieve real-time product data and identify your top-performing items. This product list goes beyond what a basic Shopify store offers. By leveraging the data you gather, you can tailor it into a format that enhances the customer experience. Imagine curated collections, personalized recommendations, or dynamic product displays based on browsing behavior –  all features unavailable in the default Shopify setup."]})})}function fe(){var n,i,o,r,c,l,h;const{products:t}=v(d=>d.products),{handle:s}=D();let a=t.filter(d=>d.handle===s)[0];return e.jsx("div",{id:"product_detail",className:"detail_section",children:a!=null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"detail_img_wrapper",children:e.jsx("img",{className:"detail_img_main",srcset:`
                ${(r=(o=(i=(n=a==null?void 0:a.media)==null?void 0:n.edges[0])==null?void 0:i.node)==null?void 0:o.previewImage)==null?void 0:r.transformedSrc} 480w,
                ${(c=a==null?void 0:a.featuredImage)==null?void 0:c.originalSrc} 800w
              `,sizes:"(max-width: 500px) 480px, 100vw",src:`${(l=a==null?void 0:a.featuredImage)==null?void 0:l.originalSrc}`,loading:"lazy"})}),e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsx("h1",{className:"section_heading",children:a.title}),e.jsx("div",{className:"handle ",children:e.jsx("span",{className:"num_format_box",children:a.handle})}),e.jsx("div",{className:"description py-10",children:a.description}),e.jsxs("div",{className:"list_section variants",children:[e.jsx("h2",{className:"list_title",children:"Variants: "}),e.jsx("ul",{children:(h=a==null?void 0:a.variants)==null?void 0:h.edges.map(d=>{let u=d.node,p=u.id.replace("gid://shopify/ProductVariant/",""),x=u.selectedOptions[0];return e.jsxs("li",{className:"variantItem",children:[e.jsx("span",{className:"vid num_format_box",children:p}),e.jsx("span",{className:"selectedOption uppercase num_format_box",children:`${x.name}/${x.value}`})]},p)})})]})]})]}):e.jsx("div",{children:" no product match the param "})})}function je(){return v(t=>t.customers),e.jsx("div",{className:"customerIndex section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Purchase History:"})," Utilize Shopify's  ",e.jsx("a",{href:"https://shopify.dev/docs/api/admin-graphql",children:" GraphQL Admin API "})," to extract detailed customer data for business intelligence. This includes metrics like total spending since account creation. By accessing this data, businesses can gain insights into customer behavior, optimize marketing, and improve customer relationship management, driving growth and success."]})})}function ge(){var i;const{customers:t}=v(o=>o.customers),{customerId:s}=D();let a=t.filter(o=>o.id.replace("gid://shopify/Customer/","")===s?o:"")[0];const n=m.useMemo(()=>ae(a),[a]);return e.jsx("div",{id:"customer_detail",className:"detail_section",children:a!=null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsx("h1",{className:"section_heading",children:`${a.firstName} ${a.lastName}`}),e.jsxs("div",{className:"totalSpending",children:["Total Spending: ",e.jsxs("span",{className:"num_format_box bg-green-700",children:["$",n]})]}),e.jsx("div",{className:"description",children:a.description}),e.jsxs("div",{className:"list_section",children:[e.jsx("h2",{className:"list_title",children:"Orders: "}),e.jsx("ul",{children:(i=a==null?void 0:a.orders)==null?void 0:i.edges.map(o=>{let r=o.node,c=r.lineItems.nodes;return e.jsxs("li",{className:"listItem orderItem",children:[e.jsxs("div",{className:"orderHeader",children:[e.jsx("span",{className:"orderNum num_format_box",children:r.name})," ",e.jsx("span",{className:"orderDate num_format_box",children:se(r.createdAt)})," ",e.jsxs("span",{className:"totalprice num_format_box",children:["$",r.totalPrice]})]}),e.jsx("div",{className:"orderBody",children:e.jsx("ul",{children:c.map(l=>{var d,u,p,x,y,w;const h=(w=(y=(x=(p=(u=(d=l==null?void 0:l.product)==null?void 0:d.media)==null?void 0:u.edges[0])==null?void 0:p.node)==null?void 0:x.preview)==null?void 0:y.image)==null?void 0:w.transformedSrc;return e.jsxs("li",{className:"order_lineItem",children:[e.jsx("span",{className:"lineItem_img_wrapper",children:e.jsx("img",{className:"lineItem_img_main",src:h})}),e.jsx("span",{className:"lineItem_info num_format_box border-none",children:`${l.name} / qty:${l.quantity}`})]},`${h}-${R()}`)})})})]},`${o.id}-${R()}`)})})]})]})}):e.jsx("div",{children:" no customer match the param "})})}const ve=q([{path:"/",element:e.jsx(H,{}),errorElement:e.jsx(I,{}),loader:ne,action:Q,children:[{errorElement:e.jsx(I,{}),children:[{index:!0,path:"contacts",element:e.jsx(pe,{}),loader:oe},{path:"contacts/:contactId",element:e.jsx(le,{}),loader:E,action:ce},{path:"contacts/:contactId/edit",element:e.jsx(he,{}),loader:E,action:me},{path:"contacts/:contactId/destroy",action:ue,errorElement:e.jsx("div",{children:"Oops! There was an error."})},{path:"products",element:e.jsx(xe,{})},{path:"products/:handle",element:e.jsx(fe,{})},{path:"customers",element:e.jsx(je,{})},{path:"customers/:customerId",element:e.jsx(ge,{})}]}]},{path:"*",element:e.jsx(G,{to:"/",replace:!0})}]),Ne=()=>e.jsx(F.StrictMode,{children:e.jsx(M,{store:re,children:e.jsx(W,{router:ve})})}),_e=_.createRoot(document.getElementById(j));_e.render(e.jsx(Ne,{}));
