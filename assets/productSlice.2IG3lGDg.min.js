import{a as p}from"./redux-toolkit.modern.DURh381R.min.js";import{a as c}from"./Global.DZzDGABG.min.js";import{c as u}from"./customerUtils.CvkgFsrJ.min.js";import{s as g}from"./customerUtils.C7O5_bBb.min.js";const _=""+new URL("ppl-1.DNYQ4w4w.min.jpg",import.meta.url).href,f=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"})),j=""+new URL("ppl-2.BmTWfSmn.min.jpg",import.meta.url).href,b=Object.freeze(Object.defineProperty({__proto__:null,default:j},Symbol.toStringTag,{value:"Module"})),w=""+new URL("ppl-3.BNWlGRTx.min.jpg",import.meta.url).href,y=Object.freeze(Object.defineProperty({__proto__:null,default:w},Symbol.toStringTag,{value:"Module"})),S=""+new URL("ppl-4.BQ_z0gR7.min.jpg",import.meta.url).href,h=Object.freeze(Object.defineProperty({__proto__:null,default:S},Symbol.toStringTag,{value:"Module"})),O=""+new URL("ppl-5.BfO9cnIP.min.jpg",import.meta.url).href,v=Object.freeze(Object.defineProperty({__proto__:null,default:O},Symbol.toStringTag,{value:"Module"})),L=""+new URL("ppl-6.AoeTgME2.min.jpg",import.meta.url).href,R=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"})),P=""+new URL("ppl-7.Uz3IVIb6.min.jpg",import.meta.url).href,U=Object.freeze(Object.defineProperty({__proto__:null,default:P},Symbol.toStringTag,{value:"Module"})),T=""+new URL("ppl-1.YiG6MYaK.min.jpeg",import.meta.url).href+" 200w, "+new URL("ppl-1.M01lHoVW.min.jpeg",import.meta.url).href+" 600w",E=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"})),z=""+new URL("ppl-2.Dz0o9g3R.min.jpeg",import.meta.url).href+" 200w, "+new URL("ppl-2.F0-2yxfZ.min.jpeg",import.meta.url).href+" 600w",I=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"})),M=""+new URL("ppl-3.Ua9F32sB.min.jpeg",import.meta.url).href+" 200w, "+new URL("ppl-3.Dwr48ENo.min.jpeg",import.meta.url).href+" 600w",C=Object.freeze(Object.defineProperty({__proto__:null,default:M},Symbol.toStringTag,{value:"Module"})),x=""+new URL("ppl-4.CwZpjm0m.min.jpeg",import.meta.url).href+" 200w, "+new URL("ppl-4.ILwaiNSs.min.jpeg",import.meta.url).href+" 600w",N=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"})),A=""+new URL("ppl-5.DkjcjH9F.min.jpeg",import.meta.url).href+" 200w, "+new URL("ppl-5.9eUTMaLe.min.jpeg",import.meta.url).href+" 600w",$=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"})),D=""+new URL("ppl-6.CfKUAFf4.min.jpeg",import.meta.url).href+" 200w, "+new URL("ppl-6.DzqycIj3.min.jpeg",import.meta.url).href+" 600w",B=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"})),k=""+new URL("ppl-7.Cp_u0rMz.min.jpeg",import.meta.url).href+" 200w, "+new URL("ppl-7.CI5kL8Sm.min.jpeg",import.meta.url).href+" 600w",F=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"})),i=p({name:"contacts",initialState:{placeholderImages:{},imageLoadingError:null},reducers:{loadImages:(e,t)=>{e.imageLoadingError=!1,e.placeholderImages={...e.placeholderImages,...t.payload}},imageLoadingErr:e=>{e.imageLoadingError=!0}}}),oe=()=>async(e,t)=>{try{const o=c(Object.assign({"../../assets/contacts/ppl-1.jpg":f,"../../assets/contacts/ppl-2.jpg":b,"../../assets/contacts/ppl-3.jpg":y,"../../assets/contacts/ppl-4.jpg":h,"../../assets/contacts/ppl-5.jpg":v,"../../assets/contacts/ppl-6.jpg":R,"../../assets/contacts/ppl-7.jpg":U})),s=c(Object.assign({"../../assets/contacts/ppl-1.jpg":E,"../../assets/contacts/ppl-2.jpg":I,"../../assets/contacts/ppl-3.jpg":C,"../../assets/contacts/ppl-4.jpg":N,"../../assets/contacts/ppl-5.jpg":$,"../../assets/contacts/ppl-6.jpg":B,"../../assets/contacts/ppl-7.jpg":F}));let r={};Object.keys(o).forEach(n=>{r[n]={src:o[n]??"",srcset:s[n]??""}}),e(Y(r))}catch{e(H())}},{loadImages:Y,imageLoadingErr:H}=i.actions,re=i.reducer;async function W(e=!1){let t="customersLoader() ===> ";console.log(t);try{const o="https://vzine.myshopify.com/apps/proxytest",s="appproxy_adminapi_ToM2U",r=sessionStorage.getItem(s);let n=null;if(r&&!e)console.log(t+"Returning cached data from sessionStorage"),r!==void 0&&r.trim()!="undefined"&&(console.log(t+" cachedData ",r),n=await JSON.parse(r));else{console.log(t+" start fetching ");const l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"}});if(!l.ok)throw new Error("customersLoader(): Network response was not ok");n=await l.json(),console.log(t+"Fetched new data from API:",n),n&&sessionStorage.setItem(s,JSON.stringify(n))}console.log(t+" return_data: ",n);let a="";return n&&(a=n.data.customers.edges.map(l=>l.node)),console.log(t+" results: ",a),a}catch(o){console.error(t+"error fetching customers: ",o)}}const m=p({name:"customers",initialState:{customers:[],loadingError:null},reducers:{loadCustomers:(e,t)=>{e.loadingError=!1;const o=new Set(e.customers.map(r=>r.id));if(t.payload.filter(r=>!o.has(r.id)).length>0){const r=t.payload.map(a=>({...a,totalSpending:u(a)}));let n=[...e.customers,...r];e.customers=n.sort(g("firstName","lastName"))}},loadingError:e=>{e.loadingError=!0}}}),ne=()=>async(e,t)=>{try{const o=await W();e(q(o))}catch{e(J())}},{loadCustomers:q,loadingError:J}=m.actions,se=m.reducer,K=` {
  products(first: 10) {
    edges {
      node {
        id
        title
        handle
        description
        variants(first: 5) {
          edges {
            node {              
              id
              selectedOptions {
                name
                value
              }
              priceV2 {
                amount
                currencyCode
              }
            }
          }
        }
        featuredImage {
          originalSrc           
        }
        media(first: 1) {
          edges {
            node {              
              previewImage {
                transformedSrc(maxHeight: 200, maxWidth: 200)
              }
            }
          }
        }
      }
    }
  }
}`;async function V(){return(await(await fetch("https://vzine.myshopify.com/api/2024-07/graphql.json",{method:"POST",headers:{"Content-Type":"application/json","X-Shopify-Storefront-Access-Token":"7205448e608af45a59ff19512e93792b"},body:JSON.stringify({query:K})})).json()).data.products.edges.map(s=>s.node)}const d=p({name:"product",initialState:{products:[],loadingError:null},reducers:{loadProducts:(e,t)=>{e.loadingError=!1;const o=new Set(e.products.map(r=>r.id));t.payload.filter(r=>!o.has(r.id)).length>0&&(e.products=[...e.products,...t.payload])},loadingError:e=>{e.loadingError=!0}}}),ae=()=>async(e,t)=>{try{const o=await V();e(G(o))}catch{e(Q())}},{loadProducts:G,loadingError:Q}=d.actions,le=d.reducer;export{se as a,ae as b,re as c,ne as d,oe as f,le as p};
