import{j as e}from"./icons.DHZLH5cu.min.js";import{r as m,R as F}from"./index.C8ayVwQI.min.js";import{r as z,u as A,l as E,f as C,O as B,a as L,b as v,m as O,C as T,F as N,g as U,c as $,d as V,e as q,h as P,i as k,j as D,k as H,R as Q,n as G,N as M,P as W,o as Y}from"./ContactDetail.qp35VdRu.min.js";import{S as j,s as J,i as K,r as X}from"./Global.DZzDGABG.min.js";import{c as Z}from"./redux-toolkit.modern.DURh381R.min.js";import{c as ee,a as te,p as ae}from"./productSlice.CvjiWDym.min.js";import{B as g,I as f}from"./edit.BIHAj60A.min.js";import"./customerUtils.C7O5_bBb.min.js";import{c as se,a as re}from"./customerUtils.CvkgFsrJ.min.js";import"./_commonjsHelpers.Cpj98o6Y.min.js";import"./contactsLoader.El1tzQ7g.min.js";import"./index.BYzmSUuc.min.js";import"./index.Bb4qSo10.min.js";import"./utils.CHtjtCvc.min.js";var w={},b=z;w.createRoot=b.createRoot,w.hydrateRoot=b.hydrateRoot;m.createContext(null);m.createContext(null);const ne=Z({reducer:{contacts:ee,customers:te,products:ae}});function I(){const a=A();return console.error(a),m.useEffect(()=>(a?document.getElementById(j).classList.add("error-state"):document.getElementById(j).classList.remove("error-state"),()=>{document.getElementById(j).classList.remove("error-state")}),[a]),e.jsx("div",{id:"error-page",children:e.jsxs("p",{children:["React Errors:  ",e.jsx("i",{children:a.statusText||a.message})]})})}async function ie({request:a,params:s}){try{const r=new URL(a.url).searchParams.get("q");return await E(),{contacts:await C(r),q:r}}catch(t){throw new Error("contactsLoader() issue: ",t)}}async function oe({request:a,params:s}){try{const r=new URL(a.url).searchParams.get("q");return await E(),{contacts:await C(r),q:r}}catch(t){throw new Error("contactsLoader() issue: ",t)}}const ce="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let R=(a=21)=>{let s="",t=crypto.getRandomValues(new Uint8Array(a));for(;a--;)s+=ce[t[a]&63];return s};async function S({params:a}){const s=await U(a.contactId);if(!s)throw new Response("",{status:404,statusText:"Contact Not Found"});return{contact:s}}async function le({request:a,params:s}){let t=await a.formData();return $(s.contactId,{favorite:t.get("favorite")==="true"})}function de(){const{setOutletState:a}=m.useContext(B),{contact:s}=L(),[t,r]=m.useState(),{placeholderImages:l,imageLoadingError:i}=v(n=>n.contacts);m.useEffect(()=>{if(!s||!s.avatar){console.log("====> contact or contact.avatar undefined ");return}return r(s.avatar.trim()),()=>{}},[s.avatar,s]);const c=m.useCallback(()=>{try{let n=t;if(!n||n.trim()==="")return l["ppl-1"].src;if(J(n)&&K(n)){let o=n;return o=X(o),l[o]}else return t}catch(n){return console.error("Error getting placeholder imgs:",n),""}},[t]);return i?e.jsxs("div",{children:["Error loading images: ",i.message]}):e.jsxs(O.div,{id:"contact",className:"detail_section",children:[e.jsx("div",{className:"detail_img_wrapper",children:t&&t.trim()!==""?e.jsx("img",{className:"detail_img_main",src:c().src||t,srcSet:c().srcset,sizes:"(max-width: 500px) 480px, 100vw",loading:"lazy"},t):e.jsx(T,{className:" text-slate-200 w-full h-full"})}),e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsxs("h1",{className:"section_heading flex",children:[s.first||s.last?e.jsxs(e.Fragment,{children:[s.first," ",s.last]}):e.jsx("i",{children:"No Name"})," ",e.jsx(me,{contact:s,className:"ml-4 test1"})]}),s.twitter&&e.jsx("p",{children:e.jsx("a",{target:"_blank",href:`https://twitter.com/${s.twitter}`,className:"pl-0",children:s.twitter})}),s.notes&&e.jsx("p",{children:s.notes}),e.jsxs("div",{className:"contact-btn-wrapper my-4 flex",children:[e.jsx(N,{action:"edit",children:e.jsx(g,{className:" text-contrast2 ",type:"submit",size:"xl",children:"Edit"})}),e.jsx(N,{method:"post",action:"destroy",onSubmit:n=>{confirm("Please confirm you want to delete this record.")||n.preventDefault(),a("")},children:e.jsx(g,{className:"ml-4  text-contrast2 ",type:"submit",size:"xl",children:"Delete"})})]})]})]},`${s.id}`)}function me({contact:a,className:s}){const t=V();let r=a.favorite;return t.formData&&(r=t.formData.get("favorite")==="true"),e.jsx(t.Form,{method:"post",className:s,children:e.jsx("button",{name:"favorite",value:r?"false":"true","aria-label":r?"Remove from favorites":"Add to favorites",children:r?"★":"☆"})})}async function he({request:a,params:s}){const t=await a.formData(),r=Object.fromEntries(t);return await $(s.contactId,r),P(`/contacts/${s.contactId}`)}function ue(){const{contact:a}=L(),s=q();return e.jsx("div",{className:"detail_section contact-edit",children:e.jsx("div",{className:"detail_info_wrapper",children:e.jsxs(N,{method:"post",id:"contact-form",children:[e.jsx("p",{className:"form-row",children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Name"}),e.jsx(f,{size:"xl",placeholder:"First","aria-label":"First name",type:"text",name:"first",defaultValue:a.first}),e.jsx(f,{className:" ml-4",size:"xl",placeholder:"Last","aria-label":"Last name",type:"text",name:"last",defaultValue:a.last})]})}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Twitter"}),e.jsx(f,{size:"xl",type:"text",name:"twitter",placeholder:"@Twitter",defaultValue:a.twitter})]})}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Avatar URL"}),e.jsx(f,{size:"xl",placeholder:"Avatar URL","aria-label":"Avatar URL",type:"text",name:"avatar",defaultValue:a.avatar})]})}),e.jsx("p",{className:"form-row",children:e.jsxs("label",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:" w-full  text-contrast2",name:"notes",defaultValue:a.notes,placeholder:"Notes",rows:6})]})}),e.jsx("p",{className:"form-row btn-row",children:e.jsxs("div",{className:"form-row-wrapper",children:[e.jsx("span",{className:"form-label"}),e.jsx(g,{type:"submit",size:"xl",className:"text-contrast2",children:"Save"}),e.jsx(g,{type:"button",size:"xl",className:"ml-4 text-contrast2",onClick:()=>{s(-1)},children:"Cancel"})]})})]})})})}async function pe({params:a}){return await k(a.contactId),P("/")}function xe(){return e.jsx("div",{className:"section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Directory:"})," Provides a glossary of your B2B customer contact information, streamlining communication. While this serves as a proof-of-concept for a contact directory, its underlying layout can be adapted to encompass a wider range of functionalities.  This includes the management of merchandise information, product categorization, and establishing associations between different data points."]})})}function fe(){return e.jsx("div",{className:"section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Best Sellers:"})," Leverage Shopify's ",e.jsx("a",{href:"https://shopify.dev/docs/api/storefront",children:" GraphQL Storefront API "})," to retrieve real-time product data and identify your top-performing items. This product list goes beyond what a basic Shopify store offers. By leveraging the data you gather, you can tailor it into a format that enhances the customer experience. Imagine curated collections, personalized recommendations, or dynamic product displays based on browsing behavior –  all features unavailable in the default Shopify setup."]})})}function je(){var r,l,i,c,n,o,h;const{products:a}=v(d=>d.products),{handle:s}=D();let t=a.filter(d=>d.handle===s)[0];return e.jsx("div",{id:"product_detail",className:"detail_section",children:t!=null?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"detail_img_wrapper",children:e.jsx("img",{className:"detail_img_main",srcset:`
                ${(c=(i=(l=(r=t==null?void 0:t.media)==null?void 0:r.edges[0])==null?void 0:l.node)==null?void 0:i.previewImage)==null?void 0:c.transformedSrc} 480w,
                ${(n=t==null?void 0:t.featuredImage)==null?void 0:n.originalSrc} 800w
              `,sizes:"(max-width: 500px) 480px, 100vw",src:`${(o=t==null?void 0:t.featuredImage)==null?void 0:o.originalSrc}`,loading:"lazy"})}),e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsx("h1",{className:"section_heading",children:t.title}),e.jsx("div",{className:"handle ",children:e.jsx("span",{className:"num_format_box",children:t.handle})}),e.jsx("div",{className:"description py-10",children:t.description}),e.jsxs("div",{className:"list_section variants",children:[e.jsx("h2",{className:"list_title",children:"Variants: "}),e.jsx("ul",{children:(h=t==null?void 0:t.variants)==null?void 0:h.edges.map(d=>{let u=d.node,p=u.id.replace("gid://shopify/ProductVariant/",""),x=u.selectedOptions[0];return e.jsxs("li",{className:"variantItem",children:[e.jsx("span",{className:"vid num_format_box",children:p}),e.jsx("span",{className:"selectedOption uppercase num_format_box",children:`${x.name}/${x.value}`})]},p)})})]})]})]}):e.jsx("div",{children:" no product match the param "})})}function ge(){return v(a=>a.customers),e.jsx("div",{className:"customerIndex section_index_page bg-transparent",children:e.jsxs("h2",{className:"section_heading_normalcase",children:[e.jsx("b",{children:"Purchase History:"})," Utilize Shopify's  ",e.jsx("a",{href:"https://shopify.dev/docs/api/admin-graphql",children:" GraphQL Admin API "})," to extract detailed customer data for business intelligence. This includes metrics like total spending since account creation. By accessing this data, businesses can gain insights into customer behavior, optimize marketing, and improve customer relationship management, driving growth and success."]})})}function ve(){var l;const{customers:a}=v(i=>i.customers),{customerId:s}=D();let t=a.filter(i=>i.id.replace("gid://shopify/Customer/","")===s?i:"")[0];const r=m.useMemo(()=>se(t),[t]);return e.jsx("div",{id:"customer_detail",className:"detail_section",children:t!=null?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"detail_info_wrapper",children:[e.jsx("h1",{className:"section_heading",children:`${t.firstName} ${t.lastName}`}),e.jsxs("div",{className:"totalSpending",children:["Total Spending: ",e.jsxs("span",{className:"num_format_box bg-green-700",children:["$",r]})]}),e.jsx("div",{className:"description",children:t.description}),e.jsxs("div",{className:"list_section",children:[e.jsx("h2",{className:"list_title",children:"Orders: "}),e.jsx("ul",{children:(l=t==null?void 0:t.orders)==null?void 0:l.edges.map(i=>{let c=i.node,n=c.lineItems.nodes;return e.jsxs("li",{className:"listItem orderItem",children:[e.jsxs("div",{className:"orderHeader",children:[e.jsx("span",{className:"orderNum num_format_box",children:c.name})," ",e.jsx("span",{className:"orderDate num_format_box",children:re(c.createdAt)})," ",e.jsxs("span",{className:"totalprice num_format_box",children:["$",c.totalPrice]})]}),e.jsx("div",{className:"orderBody",children:e.jsx("ul",{children:n.map(o=>{var d,u,p,x,_,y;const h=(y=(_=(x=(p=(u=(d=o==null?void 0:o.product)==null?void 0:d.media)==null?void 0:u.edges[0])==null?void 0:p.node)==null?void 0:x.preview)==null?void 0:_.image)==null?void 0:y.transformedSrc;return e.jsxs("li",{className:"order_lineItem",children:[e.jsx("span",{className:"lineItem_img_wrapper",children:e.jsx("img",{className:"lineItem_img_main",src:h})}),e.jsx("span",{className:"lineItem_info num_format_box border-none",children:`${o.name} / qty:${o.quantity}`})]},`${h}-${R()}`)})})})]},`${i.id}-${R()}`)})})]})]})}):e.jsx("div",{children:" no customer match the param "})})}const Ne=H([{path:"/",element:e.jsx(Q,{}),errorElement:e.jsx(I,{}),loader:ie,action:G,children:[{errorElement:e.jsx(I,{}),children:[{index:!0,path:"contacts",element:e.jsx(xe,{}),loader:oe},{path:"contacts/:contactId",element:e.jsx(de,{}),loader:S,action:le},{path:"contacts/:contactId/edit",element:e.jsx(ue,{}),loader:S,action:he},{path:"contacts/:contactId/destroy",action:pe,errorElement:e.jsx("div",{children:"Oops! There was an error."})},{path:"products",element:e.jsx(fe,{})},{path:"products/:handle",element:e.jsx(je,{})},{path:"customers",element:e.jsx(ge,{})},{path:"customers/:customerId",element:e.jsx(ve,{})}]}]},{path:"*",element:e.jsx(M,{to:"/",replace:!0})}]),we=()=>e.jsx(F.StrictMode,{children:e.jsx(W,{store:ne,children:e.jsx(Y,{router:Ne})})}),_e=w.createRoot(document.getElementById(j));_e.render(e.jsx(we,{}));
